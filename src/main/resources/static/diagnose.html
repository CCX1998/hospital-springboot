<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
		<title>Bootstrap 101 Template</title>

		<link href="./lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
		<script src="./lib/bootstrap/js/jquery-3.5.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="./lib/private/private.css" />
		<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
		<script src="./lib/bootstrap/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="./lib/private/public.css">
		<script src="./lib/private/diagnoseUpTo.js"></script>

	</head>
	<body>
		<div style="position: relative;">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb" style="margin-bottom: 0px;">
					<li class="breadcrumb-item"><a href="#">主页</a></li>
					<li class="breadcrumb-item"><a href="#">门诊医生</a></li>
					<li class="breadcrumb-item active" aria-current="page">门诊病历</li>
				</ol>
			</nav>
		</div>

		<div id="diagnose-window">
			<div id="left-part">
				<div id="left-up-part">
					<p style="font-size: 14px;">患者选择：</p><a class="glyphicon glyphicon-refresh btn btn-primary"></a>
				</div>
				<div id="left-middle-part">
					<form class="form-inline">
						<div class="form-group">
							<p class="form-control-static">患者名：</p>
						</div>
						<div class="form-group">
							<input type="text" class="form-control" id="inputPassword2" placeholder="姓名">
						</div>
						<button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
					</form>
				</div>
				<div id="left-down-part">
					<p class="bg-primary">未诊患者:</p>
					<table class="table table-hover">
						<tr v-for="(r) in noDiagnosedRegister">
							<td>{{r.medicalRecord}}</td>
							<td>{{r.name}}</td>
							<td>{{r.age}}</td>
							<td style="display: none;">{{r.gender}}</td>
							<td style="display: none;">{{r.id}}</td>
							<td style="display: none;">{{r.status}}</td>
						</tr>
					</table>
					<p class="bg-primary">已诊患者:</p>
					<table class="table table-hover">
						<tr v-for="(r) in diagnosedRegister">
							<td>{{r.medicalRecord}}</td>
							<td>{{r.name}}</td>
							<td>{{r.age}}</td>
							<td style="display: none;">{{r.gender}}</td>
							<td style="display: none;">{{r.id}}</td>
							<td style="display: none;">{{r.status}}</td>
						</tr>
					</table>
				</div>
			</div>
			<div id="right-part" class="border-line" style="margin-right: 5px;">
				<div id="patient-info" class="container-fluid" style="padding: 0px; margin: 5px">
					<div class="col-md-2" style="padding: 0;">
						<button class="btn btn-primary">
							隐藏患者栏
						</button>
					</div>
					<span id="register-info" class="text-info" style="font-size: 14px; line-height: 33px; display: none">
						病历号：<span id="recordNum" style="margin-right: 10px;"></span>
						患者姓名：<span style="margin-right: 10px;"></span>
						年龄：<span style="margin-right: 10px;"></span>，
						性别：<span style="margin-right: 10px;"></span>
						挂号id:<span id="registerId"></span>
						<span id="Selectedstatus" style="display: none;"></span>
					</span>
				</div>
				<div id="right-up-part">
					<ul class="nav nav-tabs">
						<li role="presentation" class="active"><a href="javascript:diagnose_medicalReocrd_UpTo()" style="padding-right: 18px;padding-left: 19px;">病历首页</a></li>
						<li role="presentation"><a href="#">检查申请*</a></li>
						<li role="presentation"><a href="#">检验申请*</a></li>
						<li role="presentation"><a href="#">门诊确诊*</a></li>
						<li role="presentation"><a href="#">处置申请*</a></li>
						<li role="presentation"><a href="javascript:diagnose_Prescription_UpTo()">成药处方</a></li>
						<li role="presentation"><a href="#">草药处方*</a></li>
						<li role="presentation"><a href="#">费用查询*</a></li>
					</ul>
				</div>

				<div id="right-down-part">
					<iframe name="diagnoseIframe" src="./MedicalRecord.html" style="height: 100%; width: 100%; border: none;"></iframe>
				</div>
			</div>

		</div>
	</body>
	<script src="lib/vue/vue.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/vue/axios.min.js" type="text/javascript" charset="utf-8"></script>
	<script>
		$(function() {
			var h = window.innerHeight
			$("#right-part").css({
				height: h * 0.92
			})
			$("#right-down-part").css({
				height: h * 0.77
			})

		})

		new Vue({
			el: "#left-part",
			data: {
				noDiagnosedRegister: [{
					name: "test",
					age: 11,
					medicalRecord: 231313,
					gender: "男",
					id: 1,
					status: 1

				}],
				diagnosedRegister: [{
					name: "test",
					age: 11,
					medicalRecord: 231313,
					gender: "女",
					id: 1,
					status: 2
				}]
			},
			beforeMount: function() {
				var _this = this;
				axios.get("/register/getCurrentNoDiagnoseRegister").then(function(resp) {
					_this.noDiagnosedRegister = resp.data
				})
				axios.get("/register/getCurrentDiagnosedRegister").then(function(resp) {
					_this.diagnosedRegister = resp.data
				})
			}

		})

		$(function() {
			setTimeout(function() {
				/* 点击切换右侧信息 */
				$("#left-down-part table tr").click(function(e) {
					$("#register-info").show()
					$("#left-down-part table tr").removeClass("info")
					$(this).addClass("info")
					for (var i = 1; i <= 6; i++) {
						var a = this.querySelector("td:nth-child(" + i + ")")
						var b = document.querySelector("#register-info>span:nth-child(" + i + ")");
						b.innerHTML = a.innerHTML
					}
					$("#diagnoseIframe").prop({
						src: "./MedicalRecord.html"
					})
				})
			}, 500)
			/* 500毫秒给vue准备 */

		})
	</script>
</html>
